<!--border for each food row-->

<div class="card border-primary p-2 mb-3" id="myplate-{{ uniqueid }}">
    <div class="col d-flex">
        <!--Label Column-->
        <span>{{ mealname }}</span> <br>

        <!--Serving Lineedit Column-->
        <div id="new_entry" class="col d-flex justify-content-end">
            <input type="number" min="0" class="form-control small-input" data-cals="{{ cals }}" 
            data-recid="{{ recid }}" data-carbs="{{ carbs }}" data-fats="{{ fats }}" data-prots="{{ prots }}"
            placeholder="Servings" oninput="handleServingChange()" required
            onkeypress="return isValid(event)">

            <!--Close button column-->
            <button type="button" id="close-{{ uniqueid }}" class=" btn-close btn-sm" aria-label="Close" 
            onclick="closeMyPlate(this)" data-checkid="{{ checkid }}" data-myplateid="myplate-{{ uniqueid }}"></button>
        </div>
    </div>
    <p class="text-muted pt-2">{{ location}}, {{ mealtime }}</p>
</div>

<script>

    // Validate the serving inputs
    function isValid(input) {
        var charCode = input.which || input.keyCode;
        var value = input.target.value;

        // If the pressed key is a '-'
        if (input.charCode === 45)
            return false;

        // If the key contains nonvalid chars 
        if ((input.charCode < 48 || input.charCode > 57) && input.charCode !== 46)
            return false;

        // Allow only 2 decimal places
        if (value.indexOf('.') !== -1 && value.length - value.indexOf('.') > 2)
            return false;

        return true;
    }
</script>
